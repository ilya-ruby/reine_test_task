## Задача 1

### Условия

Реализация эффективного алгоритма для парсинга и сортировки больших данных**
Условие:
У вас есть большой файл размером несколько гигабайт, содержащий информацию о
транзакциях в текстовом формате. Каждая строка файла представляет одну транзакцию и
имеет следующий формат:

`<timestamp>,<transaction_id>,<user_id>,<amount>`

Пример строки:

`2023-09-03T12:45:00Z,txn12345,user987,500.25`

Реализуйте программу на Ruby, которая выполняет следующие действия:

1.Читает файл с диска, не загружая его полностью в память.
2.Парсит каждую строку и представляет транзакции в виде объектов.
3.Сортирует транзакции по amount в порядке убывания.
4.Записывает отсортированные транзакции в новый файл, также не загружая все данные
в память одновременно.

Требования:

- Вы должны использовать методы обработки данных, которые эффективны по
    использованию памяти и времени выполнения.
- Предполагается, что объем данных может не помещаться в оперативной памяти,
    поэтому использование стримов и ленивой загрузки будет предпочтительным.
- Реализуйте свою версию алгоритма сортировки, а не используйте встроенные методы
    Ruby для сортировки (например, sort).
- Напишите тесты для вашего кода (Rspec как плюс).

### Решение

Можно запустить `run_me.sh`, который выполняет решение, а также `rspec` для прогона тестов

Подготовка данных:
```
$ time bash ./run_me.sh
Создано строк: 500000, текущий размер: 28.46 MB
Создано строк: 1000000, текущий размер: 56.91 MB
Создано строк: 1500000, текущий размер: 85.37 MB
....
Создано строк: 89500000, текущий размер: 5093.74 MB
Файл transactions_5gb.txt успешно создан, размер: 5120.0 MB

real    15m35.667s
user    12m38.204s
sys     2m53.473s
```

Сортировка слиянием

```
Создание чанков: 179
[20:36:41] Создано 180 чанков.
Слияние: |====| 89961407/89961407 (ETA: Time: 00:23:09)
[21:00:08] Слияние завершено.
Файл отсортирован и сохранён в transactions_5gb_sorted.txt

real    31m3.829s
user    30m5.381s
sys     0m23.185s
```

Проверка сортировки выходного файла

```
Файл отсортирован!
```

## Задача 2

### Условия

1. Дана строка s и словарь d, содержащий некие слова. Определите,можно ли
строку s представить в последовательность разделенных пробелом слов,
содержащихся в словаре d.

Пример: дано, s =«двесотни», d = [«две», «сотни», «тысячи»].

Программа должна вернуть true, потому что «двесотни» могут быть представлены как «две сотни».

### Решение

Запустить word_break.rb

```
$ ruby word_break.rb

Словарь: ["две", "сотни", "тысячи", "сто", "пятьдесят", "рублей", "долларов", "миллион", "двадцать", "три", "тысячи", "рублей"]

Результаты проверки строк:

  "двесотни" -> true
  "двесотня" -> false
  "пятьдесятрублей" -> true
  "двадцатитритьысячирублей" -> false
  "стоодинрубль" -> false
```

## Задача 3 (без кодирования)

### Задача

Вам дан набор данных, представляющих геопозиции курьера, собранные с GPS- маячка,
установленного на его электровелосипеде. Маячок собирает данные каждые 20 секунд. Из-за
плотной застройки и различных помех данные могут быть неточными, с погрешностью до 50
метров, особенно в местах парковки.

Предложите алгоритм для обработки данных геопозиций курьера с целью построения его
маршрута на карте. Алгоритм должен минимизировать резкие скачки в данных и
максимально точно отражать реальный маршрут курьера.

Достаточно описать шаги алгоритма решения задачи.

### Решение

Фильтрация выбросов:

1. Исключить точки, которые явно противоречат соседним (например, скачок > 100 м за 20 секунд).

Можно применять простую проверку скорости (если вычисленная скорость нереалистична, точку отбрасывать или сглаживать).
Сглаживание и корректировка координат:

2. Использовать скользящее среднее или Калман-фильтр для уменьшения мелких «шумовых» колебаний.

При обнаружении резких скачков сравнивать их с усреднённым направлением движения и скоростью.
Привязка к дорогам (Map Matching):

3. Сопоставлять (привязывать) очищенные координаты с дорожной сетью (например, с помощью алгоритмов OSRM, Valhalla, GraphHopper).

Если координата «отклоняется» от реальной дороги из-за погрешности GPS, корректировать её в пределах допустимого радиуса (до 50 м).
Интерполяция маршрута:

4. Заполнить промежуточные точки, если между замерами есть большие пропуски; это можно сделать линейной интерполяцией или с учётом дорожного графа.
Использовать данные о скорости движения (если есть) для более точной расстановки точек во времени.
Итоговая реконструкция трека:

5. Последовательно «пройтись» по скорректированным точкам, формируя маршрут на карте.
В местах длительной остановки (парковки) избежать «дрейфа» точки за счёт более строгого порога фильтрации (например, при низкой скорости дополнительные колебания координат сильнее сглаживать).

## Задача 4 (без кодирования)

### Условие

У компании имеется следующии склад (см. рис), три ряда стеллажеи, стоящие в ряд по
700 ед. Каждый стеллаж содержит 5 полок. Каждая полка содержит 6 ячеек. Между рядами
стеллажей есть проходы. Между стеллажами в одном ряду проходов нет. Ширина полок
одинакова и равна ширине прохода. Зеленым цветом обозначены проходы.
Кладовщику выдается случайный перечень ячеек, из которых требуется взять товар.
Помогите составить маршрут передвижения кладовщика по складу, начиная движение от
стола, таким образом, чтобы он затратил минимально возможный путь.

1. Достаточно описать шаги алгоритма решения задачи.

2. Объясните почему решение оптимальное.

### Решение

Ниже показан один из действительно коротких маршрутов (скорее всего, оптимальный) при условии, что:

x – это проходимая клетка,
o – это стеллаж (непроходимый), но для «взятия» товара достаточно встать на соседнюю клетку x,
S – стол (точка старта и конца), расположенная в правом нижнем углу,

Нужно «обойти» все стеллажи (o) и вернуться к столу (S), двигаясь только по клеткам x.
Для удобства далее я нумерую строки сверху вниз от 0 до 7, а столбцы слева направо от 0 до 6 (в последней строке стол S фактически стоит в позиции (7,7)):

```
  Строка 0: x x x x x x x
  Строка 1: x o x o x o x
  Строка 2: x o x o x o x
  Строка 3: x o x o x o x
  Строка 4: x o x o x o x
  Строка 5: x o x o x o x
  Строка 6: x o x o x o x
  Строка 7: x x x x x x x S
            0 1 2 3 4 5 6  (столбцы)
```

### Ключевая идея

Каждый «o» (стеллаж) находится в нечётных столбцах 1, 3, 5; между ними — проходы в столбцах 0, 2, 4, 6.

1. Начало

Стартуем от стола (S) в правом нижнем углу.
Поднимаемся (и/или смещаемся) к нижнему ряду со стеллажами (строка 6, там где «x o x o x o x»).

2. Сбор товаров «змейкой»:

В каждой строке со стеллажами (от 6-й до 1-й) идём вдоль колонок 2 и 4.
Так мы проходим рядом со стеллажами в колонках 1,3,5 и «собираем» их.
Затем поднимаемся на одну строку выше и повторяем.
3. Возвращение:

После последней нужной строки (1-й) спускаемся обратно к столу (S).
Такой «змеиный» проход по колонкам 2 и 4 позволяет «зацепить» все стеллажи без лишних кругов. Общая длина пути получается 38 шагов

